<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REG-Page</title>
    <link rel="stylesheet" type="text/css" href="../css/reg.css" />
</head>
<body>
    <h2 id="title">MongoDB - Aggregate Practice</h2>
    <form action="/basic/reg_logic" method="post" id="reg_form">
        <fieldset>
            <legend>필수 할목</legend>
            <input id="id" placeholder="아이디" type="text" name="id" autofocus><br>
            <input id="pw" placeholder="비밀번호" type="password" name="pw"><br>
            <input id="name" placeholder="닉네임" type="text" name="name"><br>
        </fieldset>
        <fieldset>
            <legend>선택항목</legend>
            <input id="email" placeholder="이메일" type="email" name="email"><br>
            <input id="phone_number" placeholder="전화번호(번호만 입력)" type="tel" name="phone_number"><br><br>
            <!-- daum Postcode service -->
            <input type="text" id="address_number" name="address_number" placeholder="우편번호">
            <input type="button" onclick="execDaumPostcode()" value="우편번호 찾기"><br>
            <input type="text" id="roadAddress" name="roadAddress" placeholder="도로명주소">
            <input type="text" id="jibunAddress" name="jibunaddress" placeholder="지번주소">
            <span id="guide" style="color:#999; display:none"></span>
            <input type="text" id="detailAddress" name="detailAddress" placeholder="상세주소">
            <input type="text" id="extraAddress" name="extraAddress" placeholder="참고항목"><br>
        </fieldset>
        <button id="btn" type="submit">회원가입</button>
    </form>

    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
        //https://postcode.map.daum.net/guide#usage
        function execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function (data) {
                    var roadAddr = data.roadAddress
                    var extraRoadAddr = ''
                    if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
                        extraRoadAddr += data.bname
                    }
                    if (data.buildingName !== '' && data.apartment === 'Y') {
                        extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName)
                    }
                    if (extraRoadAddr !== '') {
                        extraRoadAddr = ' (' + extraRoadAddr + ')'
                    }
                    document.getElementById('address_number').value = data.zonecode
                    document.getElementById("roadAddress").value = roadAddr
                    document.getElementById("jibunAddress").value = data.jibunAddress
                    if (roadAddr !== '') {
                        document.getElementById("extraAddress").value = extraRoadAddr
                    } else {
                        document.getElementById("extraAddress").value = ''
                    }
                    var guideTextBox = document.getElementById("guide")
                    if (data.autoRoadAddress) {
                        var expRoadAddr = data.autoRoadAddress + extraRoadAddr
                        guideTextBox.innerHTML = '(예상 도로명 주소 : ' + expRoadAddr + ')'
                        guideTextBox.style.display = 'block'
                    } else if (data.autoJibunAddress) {
                        var expJibunAddr = data.autoJibunAddress
                        guideTextBox.innerHTML = '(예상 지번 주소 : ' + expJibunAddr + ')'
                        guideTextBox.style.display = 'block'
                    } else {
                        guideTextBox.innerHTML = ''
                        guideTextBox.style.display = 'none'
                    }
                }
            }).open()
        }
    </script>
</body>
</html>